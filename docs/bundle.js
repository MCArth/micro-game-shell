!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);function r(e){var n=e._nowObject.now(),t=1e3/e.tickRate,r=e._lastTick+t;n<r||(e._lastTick=Math.max(n-t,r),e.onTick(t))}function o(e){requestAnimationFrame(e._frameCB),r(e);var n=e._nowObject.now(),t=n-e._rt;if(e._rt=n,e.maxRenderRate>0){e._renderAccum+=t;var o=1e3/e.maxRenderRate;if(e._renderAccum<o)return;e._renderAccum=Math.min(e._renderAccum-o,o)}var i=1e3/e.tickRate,c=(n-e._lastTick)/i;e.onRender(t,c,i)}var i=e=>{if("loading"===document.readyState){var n=()=>{document.removeEventListener("readystatechange",n),e()};document.addEventListener("readystatechange",n)}else setTimeout(e,1)},c=document.querySelector.bind(document),a=c(".game"),u=new class{constructor(e,n=10){this.stickyPointerLock=!1,this.stickyFullscreen=!1,this.tickRate=30,this.maxRenderRate=0,this.pointerLock=!1,this.fullscreen=!1,this.onTick=function(e){},this.onRender=function(){},this.onInit=function(){},this.onResize=function(){},this.onPointerLockChanged=function(e){},this.onFullscreenChanged=function(e){},i(()=>{!function(e,n){e._nowObject=performance||Date,e._lastTick=0,e._renderAccum=0,e._rt=0,e._frameCB=o.bind(null,e),requestAnimationFrame(e._frameCB),n>0&&(e._intervalCB=r.bind(null,e),e._interval=setInterval(e._intervalCB,n))}(this,n),function(e,n){if(!n)return;var t=!1,r=!1;document.addEventListener("pointerlockchange",r=>{t=document.pointerLockElement===n,e.onPointerLockChanged(t)}),document.addEventListener("fullscreenchange",t=>{r=document.fullscreenElement===n,e.onFullscreenChanged(r)}),Object.defineProperty(e,"pointerLock",{get:()=>t,set:e=>{e&&!t?n.requestPointerLock():t&&!e&&document.exitPointerLock()}}),Object.defineProperty(e,"fullscreen",{get:()=>r,set:e=>{e&&!r?n.requestFullscreen():r&&!e&&document.exitFullscreen()}}),n.addEventListener("click",o=>{e.stickyPointerLock&&!t&&n.requestPointerLock(),e.stickyFullscreen&&!r&&n.requestFullscreen()});var o=()=>e.onResize();if(window.ResizeObserver){new ResizeObserver(o).observe(n)}else window.addEventListener("resize",o)}(this,e),this.onInit()})}}(a,15),s=0,l=0;function d(e,n){var t=c(e);t.oninput=e=>{var t=parseInt(e.target.value);n(isNaN(t)?e.target.checked:t)},setTimeout(()=>{var e=parseInt(t.value);n(isNaN(e)?t.checked:e)},1)}d("#PL",e=>{u.stickyPointerLock=e}),d("#FS",e=>{u.stickyFullscreen=e}),d("#TR",e=>{u.tickRate=e}),d("#MRR",e=>{u.maxRenderRate=e}),d("#WTT",e=>{s=e}),d("#WTR",e=>{l=e}),c(".spike").onclick=function(){for(var e=performance.now()+500;performance.now()<e;);};var f=j(),m=1,v=0;u.onTick=e=>{if(y){var n=performance.now();console.log("  tick","dt",n-v,"dur",e),v=n}!function(e){(R+=600*e/1e3)>w&&(R-=w);(_+=50*e/1e3)>L&&(_-=L)}(e);var t=f();0==--m&&(c("#OTR").textContent=Math.round(t),m=h(t));for(var r=performance.now()+s;performance.now()<r;);};var p=j(),k=1;u.onRender=(e,n,t)=>{if(y){var r=n*t;console.log("render","dt",e,"part",n,"ms in:",r)}!function(e,n){var t=(R+e*(600*n/1e3))%w,r=_+e*(50*n/1e3);if(0===O)x(1),C(t,30,40,40);else if(1===O){x(P++%10==0?.15:.05);C(t,r,2,30),r>L-30&&C(t,r-L,2,30)}else{var o=t-T;o<-w/2&&(o+=w),T=t,x(.02),b.globalCompositeOperation="copy",b.drawImage(b.canvas,-o,0),b.globalCompositeOperation="source-over",C(w-15,10,1,L-20)}}(n,t);var o=p();0==--k&&(c("#OFR").textContent=Math.round(o),k=h(o));for(var i=performance.now()+l;performance.now()<i;);};var h=e=>Math.ceil(e/5),y=!1;document.addEventListener("keydown",e=>{"p"===e.key&&(y=!y)});var g=c(".output"),b=g.getContext("2d"),R=0,_=0,w=g.width,L=g.height,O=0;g.onclick=()=>{O=(O+1)%3};var P=0,T=0;var x=e=>{b.fillStyle=`rgba(255,255,255, ${e})`,b.fillRect(0,0,w,L)},C=(e,n,t,r)=>{b.fillStyle="red",b.fillRect(e,n,t,r)};function j(){var e=0,n=10;return()=>{var t=performance.now(),r=t-e;return e=t,1e3/(n=.95*n+r*(1-.95))}}}]);